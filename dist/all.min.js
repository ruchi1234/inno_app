app.controller("BasketCtrl",["$scope","$rootScope","$state","$localStorage","placeOrder","$stateParams",function($scope,$rootScope,$state,$localStorage,placeOrder,$stateParams){function getCart(){$scope.items=[],$scope.totalqauntity=0,$scope.itemQuantity=[],$scope.counters=[],$scope.counters=$rootScope.counters;var t=0;if($localStorage[shopWise]){$localStorage[shopWise]=$localStorage[shopWise].replace(/,\s*$/,""),$scope.items=JSON.parse("["+$localStorage[shopWise]+"]");for(var e=$scope.items.length,o=0;o<e;o++)$scope.counters.indexOf($scope.items[o].quantity)==-1&&$scope.counters.splice(0,0,$scope.items[o].quantity),$scope.itemQuantity[$scope.items[o].prduct_id]=$scope.items[o].quantity,t+=parseInt($scope.items[o].quantity),$scope.totalqauntity+=parseFloat($scope.items[o].price)*parseFloat($scope.items[o].quantity)*parseFloat($scope.items[o].pkgquantity);$scope.totalqauntity=parseFloat($scope.totalqauntity),$scope.quantity=t,$scope.IsClickEnable=!0,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp}else t=0,$scope.quantity=t,$scope.noData="No Item Selected"}var shopWise="cart_"+$localStorage.cart;$localStorage[shopWise];var shopWiseItem="totalItemInCart_"+$localStorage.cart;$rootScope.ordering=$localStorage.ordering,$scope.$on("$ionicView.enter",function(t,e){getCart()}),$scope.removeItem=function(t){var e=0;$scope.quantity=$scope.quantity-parseInt($scope.items[t].quantity),$scope.totalqauntity=$scope.totalqauntity-parseFloat($scope.items[t].quantity)*parseFloat($scope.items[t].quantity),$scope.totalqauntity=parseFloat($scope.totalqauntity),$scope.items.splice(t,1);var o=$localStorage[shopWise].split(", "),a=o.length,s="";if(angular.forEach(o,function(e,o){o!=t&&o<a-1?s+=e+", ":o!=t&&(s+=e)}),s=s.replace(/,\s*$/,"")){$scope.totalqauntity=0,$localStorage[shopWise]=s;for(var c=0;c<$scope.items.length;c++)e+=parseInt($scope.items[c].quantity),$scope.totalqauntity+=parseFloat($scope.items[c].price)*parseFloat($scope.items[c].quantity)*parseFloat($scope.items[c].pkgquantity),$scope.totalqauntity=parseFloat($scope.totalqauntity);$rootScope.itemInCart=e,$localStorage[shopWiseItem]=$rootScope.itemInCart,e=0}else delete $localStorage[shopWise],delete $localStorage[shopWiseItem],$scope.totalqauntity=0,$scope.IsClickEnable=!1},$scope.cover=0,$scope.placeOrder=function(){$scope.cover=1;var t=$scope.items,e=$localStorage.profile;placeOrder.placeOrder(t,e,$localStorage.currentSelectedShop).success(function(t){$scope.items=[],$scope.totalqauntity=0,delete $localStorage[shopWise],delete $localStorage[shopWiseItem],$scope.cover=0,$state.go("app.thankyou")}).error(function(t){})},$scope.updateQuantity=function(index,productId){$scope.quantity=$scope.quantity-$scope.items[index].quantity,$scope.totalqauntity=$scope.totalqauntity-parseInt($scope.items[index].quantity)*parseFloat($scope.items[index].price)*parseInt($scope.items[index].pkgquantity),$scope.items[index].quantity=parseInt($scope.itemQuantity[productId]),$scope.quantity=$scope.quantity+parseInt($scope.items[index].quantity),$rootScope.itemInCart=$scope.quantity,$localStorage[shopWiseItem]=$rootScope.itemInCart,$scope.totalqauntity+=parseFloat($scope.items[index].price)*parseInt($scope.items[index].quantity)*parseInt($scope.items[index].pkgquantity),$scope.totalqauntity=parseFloat($scope.totalqauntity);var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length,flag=0,tempcart="";angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==$scope.items[index].prduct_id&&0==flag&&(productWise.quantity=$scope.items[index].quantity,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag&&($localStorage[shopWise]=tempcart,flag=0,tempcart="");var quantity=0;$localStorage[shopWise]&&($localStorage[shopWise]=$localStorage[shopWise].replace(/,\s*$/,""))}}]);
app.controller("product_serach",["$scope","$sessionStorage","$localStorage","$rootScope","$state","$location","myFavourite","$ionicPopup","searchItem","totalItme","myWishList","notifyMe","$ionicHistory",function($scope,$sessionStorage,$localStorage,$rootScope,$state,$location,myFavourite,$ionicPopup,searchItem,totalItme,myWishList,notifyMe,$ionicHistory){$scope.limit=0,$scope.noMoreItemsAvailable=!0,checkConnection()&&$state.go("app.error_page"),$scope.latestproduct=$localStorage.latestProduct,$scope.shopName=$localStorage.currentSelectedShopName,$rootScope.ordering=$localStorage.ordering,$rootScope.location=$location,$localStorage.preURL=$rootScope.location.path(),$scope.loadingdata=1;var cat_id=$localStorage.subcategoryId,shopWise="cart_"+$localStorage.cart,shopWiseItem="totalItemInCart_"+$localStorage.cart;$scope.wishList=$localStorage.wishList,$scope.wishDirection=function(){if($localStorage.wishList)$state.go("app.wish_list");else{$ionicPopup.alert({title:"Your Wish List",template:"Your WishList is empty!"})}},$localStorage[shopWiseItem]?$rootScope.itemInCart=$localStorage[shopWiseItem]:($localStorage[shopWiseItem]=0,$rootScope.itemInCart=$localStorage[shopWiseItem]);var totalitem=1;$scope.formData={},$scope.category=[],$scope.product-[],$scope.addTofavourite=function(o,e){o&&myFavourite.myFavouriteData(o,$localStorage.profile,e).success(function(o){$scope.category=$scope.category.concat(o.data1.records1)}).error(function(o){$scope.category=[]})},$scope.addTocart=function(productId,price,image,product_name,pkgquantity,variation){animateImage(productId),totalitem=$scope.formData.mycounter&&$scope.formData.mycounter[productId]?parseInt($scope.formData.mycounter[productId]):1,$localStorage[shopWiseItem]=parseInt($localStorage[shopWiseItem])+parseInt(totalitem),$rootScope.itemInCart=parseInt($localStorage[shopWiseItem]);var flag=0,tempcart="";if($localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==productId&&0==flag&&(productWise.quantity=productWise.quantity+totalitem,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag?($localStorage[shopWise]=tempcart,tempcart="",flag=0):($rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:totalitem,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart))}else $rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:totalitem,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)},$scope.loadingImage=1,$scope.limit=0,$scope.combineLimit=0,$scope.fetch_data=function(){totalItme.gettotalItme($localStorage.currentSelectedShop,$localStorage.profile).success(function(o){$scope.formData.searchData="",$scope.loadingImage=0,$scope.category=o.data1.records1,$scope.product=o.data3.records1,$scope.limit=$scope.category.length,$scope.ProductLimit=$scope.product.length,$scope.combineLimit=$scope.limit+"_/"+$scope.ProductLimit,0==o.remainingData&&0!=o.moreremainingData?remainingData=o.moreremainingData:remainingData=o.remainingData,remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp}).error(function(o,e){if(o||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page")})},$scope.item_not_found=!1,$scope.search_product=function(){var o=$scope.formData.searchData,e=o.length;e&&($scope.item_not_found=0,$scope.category=[],$scope.product=[],searchItem.search_item($scope.formData.searchData,$localStorage.currentSelectedShop,$localStorage.profile).success(function(o){$scope.loadingImage=0,$scope.category=o.data1.records1,$scope.product=o.data3.records1,$scope.mrp=$localStorage.mrp,$scope.currencyCode=$localStorage.currencyCode,0==$scope.category.length&&0==$scope.product.length&&($scope.item_not_found=!0),$scope.limit=$scope.category.length,$scope.ProductLimit=$scope.product.length,$scope.combineLimit=$scope.limit+"_/"+$scope.ProductLimit,0==o.remainingData&&0!=o.moreremainingData?remainingData=o.moreremainingData:remainingData=o.remainingData,remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0}).error(function(o,e){if(o||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page")}))},$scope.loadMore=function(){searchItem.loadSearch_item($scope.formData.searchData,$localStorage.currentSelectedShop,$localStorage.profile,$scope.combineLimit).success(function(o){$scope.loadingImage=0,$scope.category=$scope.category.concat(o.data1.records1),$scope.product=$scope.product.concat(o.data3.records1),$scope.limit=$scope.category.length,$scope.ProductLimit=$scope.product.length,$scope.combineLimit=$scope.limit+"_/"+$scope.ProductLimit,0==o.remainingData&&0!=o.moreremainingData?remainingData=o.moreremainingData:remainingData=o.remainingData,remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp}).error(function(o,e){if(o||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page")})},$scope.getsearchProduct=function(){$scope.hasItem=!1,$scope.searchproduct=[],myWishList.myWishListData($localStorage.profile,$localStorage.currentSelectedShop).success(function(o){$scope.hasItem=o.hasItem,$scope.hasItem||($scope.hasMsg="Add products to your wish list while you shop and add them to your cart later."),$scope.product=o.data2,$scope.counter=o.data4.records1,$scope.searchproduct=o.data1.records1,$scope.loadingdata=0,$scope.mycounter=$scope.counter[0],$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0}).error(function(o,e){if(o||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page")})},$scope.getProductId=function(o,e){$localStorage.productID=o,e?$localStorage.productParentID=e:$localStorage.productParentID=o},$scope.customizeproduct=function(o){$localStorage.productID=o,$localStorage.productParentID=o,$state.go("app.customize")},$scope.notify=function(o){$ionicPopup.alert({title:"Notify Me",template:"We will inform you, Once Product is Available."});$localStorage.productID=o,notifyMe.notifyMe($localStorage.productID,$localStorage.profile,$localStorage.currentSelectedShop).success(function(o){}).error(function(o){})},$scope.setpreURL=function(){$ionicHistory.goBack()}}]);
app.controller("ContactUsCtrl",["$state","$scope","$localStorage","searchItem","$sessionStorage","$ionicPopup","saveContactDetail",function(e,t,a,s,r,o,l){a.profile||e.go("app.login"),t.formData={},t.disable_button="",t.contact=function(){var e=1;t.formData.issue?t.errissue="":(e=0,t.errissue="Fields are required"),t.formData.subject?t.errsubject="":(e=0,t.errsubject="Fields are required"),t.formData.message?t.errmessage="":(e=0,t.errmessage="Fields are required"),1==e&&(t.disable_button=2,console.log(a),l.sendIssue(t.formData.issue,t.formData.subject,t.formData.message,a.currentSelectedShop,a.profile).success(function(e){t.disable_button="";o.alert({title:"Status",template:"Your Complain hass been submited successfully"});t.formData.issue="",t.formData.subject="",t.formData.message=""}).error(function(e){alert("error detail"+e)}))}}]),app.controller("IssueStatusCtrl",["$state","$scope","$localStorage","searchItem","$sessionStorage","getMessageReply",function(e,t,a,s,r,o){a.profile||e.go("app.login"),t.formData={},t.msgDetail=[],a.currentSelectedShop,a.profile,t.loadingdata=1,t.getComplainDetail=function(t){r.subject_id=t,e.go("app.issue_status_detail")},o.getMessage(a.currentSelectedShop,a.profile).success(function(e){t.loadingdata=2,t.msgDetail=t.msgDetail.concat(e.data1)}).error(function(e){alert("error detail"+e)})}]),app.controller("IssueStatusDetailCtrl",["$state","$scope","$localStorage","searchItem","$sessionStorage","getMessageDetail",function(e,t,a,s,r,o){a.profile||e.go("app.login"),t.formData={},t.msgDetail=[],t.post=function(){t.formData.message&&o.reply(t.formData.message,r.subject_id,a.currentSelectedShop,a.profile).success(function(e){t.msgDetail=t.msgDetail.concat(e.data1),t.formData.message=""}).error(function(e){alert("error detail"+e)})},console.log(r.subject_id),a.currentSelectedShop,a.profile,t.loadingdata=1,o.getMessage(r.subject_id).success(function(e){t.loadingdata=2,t.msgDetail=e.data1,t.subjects=e.subject,t.admin_name=e.admin_name,t.user_name=e.user_name,console.log(t.msgDetail)}).error(function(e){alert("error detail"+e)})}]);
function stringIsNumber(e){var o=+e;return o.toString()===e}app.controller("IntroCtrl",["$scope","$state","$ionicSlideBoxDelegate",function(e,o,r){e.next=function(){r.next()},e.previous=function(){r.previous()},e.slideChanged=function(o){e.slideIndex=o},e.discardIntroPage=function(){o.go("app.login")}}]),app.controller("MainCtrl",["$scope","$ionicSideMenuDelegate","$ionicHistory",function(e,o,r){e.toggleLeft=function(){o.toggleLeft()},e.goBackOne=function(){r.goBack()},e.shareMain=function(){var e="Download Smove For Android",o="https://play.google.com/store/apps/details?id=com.myspecialgames.swipe";window.plugins.socialsharing.share(e,null,null,o)},e.shareArticle=function(e,o){window.plugins.socialsharing.share(e,null,null,o)},e.openLinkArticle=function(e){window.open(e,"_system")}}]),app.controller("ErrorPageCtrl",["$scope",function(e){}]),app.controller("LoginCtrl",["$state","$scope","login","$log","$localStorage","$sessionStorage","$ionicPlatform","$ionicPopup",function(e,o,r,t,a,i,s,n){s.offHardwareBackButton(function(){}),a.profile&&e.go("app.store_list"),o.formData={};o.onlyInteger=function(e){},o.cover=0,o.doLogin=function(){var t=1;if(checkConnection()){n.alert({title:"Network issue",template:"Oops something wrong!",okText:"Refresh"})}else{if(o.formData.phone){var i=o.formData.phone.charAt(0);if(0!=i)var s=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{4}$/;else var s=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{5}$/;var l=s.test(o.formData.phone);0==l?(t=0,o.myObj={"border-bottom":"red 1px solid"}):o.myObj={"border-bottom":"#ddd 1px solid"}}else t=0,o.myObj={"border-bottom":"red 1px solid"};if(o.formData.password?o.passStyle={"border-bottom":"#ddd 1px solid"}:(t=0,o.passStyle={"border-bottom":"red 1px solid"}),1==t){o.cover=1;var d="1",c="";localStorage.device_token_syt&&"-1"!=localStorage.device_token_syt&&(d=localStorage.device_token_syt,c=ionic.Platform.isAndroid()?"android":"ios"),r.loginpage(o.formData.phone,o.formData.password,d,c).success(function(r){o.errormsg="",o.errorpass="",1==r.Str&&r.token?(a.profile=r.token,localStorage.auth_token=r.auth_token,e.go("app.store_list")):(o.cover=0,o.errorpass="Invalid Login Details")}).error(function(o,r){if(o||0!=r){if(408===r){n.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});e.go(e.current,{},{reload:!0})}}else e.go(e.current,{},{reload:!0})})}}}}]),app.controller("ChangepassCtrl",["$state","$scope","forgot","changePassword","$localStorage",function(e,o,r,t,a){checkConnection()&&e.go("app.error_page"),o.formData={},o.errorpass="",o.changePaasword=function(){var e=1,r=0;if(o.cover=0,o.formData.cupass){var i=o.formData.cupass;i=i.length,i<6?(e=0,r=1,o.currentStyle={"border-bottom":"red 1px solid"}):o.currentStyle={"border-bottom":"#ddd 1px solid"}}else e=0,o.currentStyle={"border-bottom":"red 1px solid"};if(o.formData.newpassword){var i=o.formData.newpassword;i=i.length,i<6?(e=0,r=1,o.passStyle={"border-bottom":"red 1px solid"}):o.passStyle={"border-bottom":"#ddd 1px solid"}}else e=0,o.passStyle={"border-bottom":"red 1px solid"};if(o.formData.cnfpassword){var i=o.formData.cnfpassword;i=i.length,i<6?(e=0,r=1,o.cnfpassStyle={"border-bottom":"red 1px solid"}):o.cnfpassStyle={"border-bottom":"#ddd 1px solid"}}else e=0,o.cnfpassStyle={"border-bottom":"red 1px solid"};1==r?o.errorpass="Your password must be at least 6 characters long. ":o.formData.cnfpassword!=o.formData.newpassword?(o.errorpass="The password entered does not match.",o.cnfpassStyle={"border-bottom":"red 1px solid"},o.passStyle={"border-bottom":"red 1px solid"},r=1):o.errorpass="",1==e&&0==r&&(o.cover=1,t.change_Password(a.profile,o.formData.cupass,o.formData.newpassword).success(function(e){o.cover=0,1==e.Str?(o.formData.cupass="",o.formData.newpassword="",o.formData.cnfpassword="",o.errorpass="Your password has been change",localStorage.auth_token=e.auth_token):o.errorpass="Incorrect current password"}).error(function(e){}))}}]),app.controller("ForgotCtrl",["$state","$scope","forgot",function(e,o,r){checkConnection()&&e.go("app.error_page"),o.formdata={};var t=o.formdata.email_id;o.doForgetPass=function(){var a=1;if(o.formdata.email_id){var i=new RegExp("/^[a-z]+[a-z0-9._]+@[a-z]+.[a-z.]{2,5}$/");i.test(o.formdata.email_id)?(a=0,console.log(t),o.myObj={"border-bottom":"red 1px solid"}):o.myObj={"border-bottom":"#ddd 1px solid"}}else o.myObj={"border-bottom":"red 1px solid"},a=0;a&&r.forgotpage(o.formdata.email_id).success(function(r){o.formdata.email_id="",1==r.Str?(o.msg="Password reset link has benn sent on your registered email id",setTimeout(function(){e.go("app.login")},1500)):o.msg="This email id  is not registered yet"}).error(function(e){})}}]);var EMAIL_REGEXP=new RegExp("/^[a-z]+[a-z0-9._]+@[a-z]+.[a-z.]{2,5}$/"),PAN_REGEXP=/^([a-zA-Z]){5}([0-9]){4}([a-zA-Z]){1}?$/;app.controller("SignUpCtrl",["$scope","$state","$filter","SignUp","$localStorage","$ionicPopup","$ionicPlatform","HardwareBackButtonManager",function(e,o,r,t,a,i,s,n){e.$on("$ionicView.enter",function(e,o){}),a.profile&&o.go("app.store_list"),e.cover=0,e.myData={},e.errorvalidation="",e.signup=function(){if(e.errorvalidation="",e.myData.phone){var r=e.myData.phone.charAt(0);if(0!=r)var s=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{4}$/;else var s=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{5}$/;var l=s.test(e.myData.phone)}else var l=!1;var d=(e.myData.phone,1);if(e.myData.businessName?(e.banmeerr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""):(e.banmeerr={"border-bottom":"red 1px solid"},d=0,""==e.errorvalidation&&(e.errorvalidation="Business name is required")),e.myData.name?(e.personerr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""):(""==e.errorvalidation&&(e.errorvalidation="Contact person name is required"),e.personerr={"border-bottom":"red 1px solid"},d=0),e.myData.address?(e.texterr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""):(""==e.errorvalidation&&(e.errorvalidation="Address is required"),e.texterr={"border-bottom":"red 1px solid"},d=0),e.myData.email?EMAIL_REGEXP.test(e.myData.email)?(d=0,e.emailerr={"border-bottom":"red 1px solid"},""==e.errorvalidation&&(e.errorvalidation="Email id is not valid")):(e.emailerr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""):(""==e.errorvalidation&&(e.errorvalidation="Email is required"),e.emailerr={"border-bottom":"red 1px solid"},d=0),0==l?(e.pnumbererr={"border-bottom":"red 1px solid"},""==e.errorvalidation&&(e.errorvalidation="Phone number is not valid"),d=0):(e.pnumbererr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""),e.myData.password){var c=e.myData.password;c=c.length}else{var c="";c=c.length}if(e.myData.password?c<6?(d=0,""==e.errorvalidation&&(e.errorvalidation="Password should not be less than 6 character"),e.passerr={"border-bottom":"red 1px solid"}):(e.passerr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""):(d=0,""==e.errorvalidation&&(e.errorvalidation="Password is required"),e.passerr={"border-bottom":"red 1px solid"}),e.myData.store_list?(e.storeerr={"border-bottom":"#ddd 1px solid"},e.errorvalidation=""):(d=0,e.storeerr={"border-bottom":"red 1px solid"},""==e.errorvalidation&&(e.errorvalidation="Store code is required")),""!=e.myData.tin,1==d)if(e.errorvalidation="",checkConnection()){i.alert({title:"Network issue",template:"Oops something wrong!"})}else{n.disable(),e.cover=1,e.errormail="";var p="";localStorage.device_token_syt&&"-1"!=localStorage.device_token_syt?p=ionic.Platform.isAndroid()?"android":"ios":localStorage.device_token_syt=-1,t.registration(e.myData.name,e.myData.address,e.myData.email,e.myData.phone,e.myData.password,e.myData.store_list,e.myData.businessName,localStorage.device_token_syt,p,a.version,e.myData.pancode,e.myData.tin).success(function(r){1==r.Str?(a.profile=r.token,localStorage.auth_token=r.auth_token,n.enable(),o.go("app.store_list")):(e.cover=0,e.errormail=r.Str,e.errorstore=r.Str2)}).error(function(r,t){if(r||0!=t){if(408===t){i.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});o.go(o.current,{},{reload:!0})}}else o.go(o.current,{},{reload:!0});e.errormail="Some thing going wrong"})}else e.nameRequired="Fields cant not be blank"}}]),app.controller("MyAddressCtrl",["$scope","$state","$filter","profileData","$localStorage",function(e,o,r,t,a){e.loadingdata=1,checkConnection()&&o.go("app.error_page"),e.userProfile=[],t.Profile_data(a.profile).success(function(o){e.userProfile=e.userProfile.concat(o.data1.records1),e.loadingdata=0}).error(function(e){})}]),app.controller("EditAddressCtrl",["$scope","$state","$filter","profileData","$localStorage","Updateprofile",function(e,o,r,t,a,i){e.loadingdata=1,checkConnection()&&o.go("app.error_page"),e.userProfile=[],e.myData={},t.Profile_data(a.profile).success(function(o){e.userProfile=e.userProfile.concat(o.data1.records1),e.loadingdata=0,e.myData.businessName=e.userProfile[0].businessName,e.myData.name=e.userProfile[0].name,e.myData.address=e.userProfile[0].address,e.myData.email=e.userProfile[0].email,e.myData.hdnemail=e.userProfile[0].email,e.myData.phone=e.userProfile[0].phone,e.hdnPhone=e.userProfile[0].phone,e.myData.pincode=e.userProfile[0].pincode,e.myData.panard=e.userProfile[0].pancard,e.myData.tin=e.userProfile[0].tin}).error(function(e){}),e.editProfile=function(){var r=1;e.errormail="";var t=(stringIsNumber(e.myData.phone),stringIsNumber(e.myData.pincode));if(e.myData.businessName?e.banmeerr={"border-bottom":"#ddd 1px solid"}:(r=0,e.banmeerr={"border-bottom":"red 1px solid"}),e.myData.name?e.personerr={"border-bottom":"#ddd 1px solid"}:(r=0,e.personerr={"border-bottom":"red 1px solid"}),e.myData.address?e.texterr={"border-bottom":"#ddd 1px solid"}:(r=0,e.texterr={"border-bottom":"red 1px solid"}),e.myData.email?EMAIL_REGEXP.test(e.myData.email)?(r=0,e.emailerr={"border-bottom":"red 1px solid"}):e.emailerr={"border-bottom":"#ddd 1px solid"}:(r=0,e.emailerr={"border-bottom":"red 1px solid"}),e.myData.phone){var s=e.myData.phone.charAt(0);if(0!=s)var n=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{4}$/;else var n=/^[(]{0,1}[0-9]{3}[)\.\- ]{0,1}[0-9]{3}[\.\- ]{0,1}[0-9]{5}$/;var l=n.test(e.myData.phone);0==l?(r=0,e.pnumbererr={"border-bottom":"red 1px solid"}):e.pnumbererr={"border-bottom":"#ddd 1px solid"}}else r=0,e.pnumbererr={"border-bottom":"red 1px solid"};if(e.myData.pincode){var d=e.myData.pincode.length;0==t?(r=0,e.storeerr={"border-bottom":"red 1px solid"},e.pincodeRequired="Enter Integer Only"):6!=d?(r=0,e.storeerr={"border-bottom":"red 1px solid"},e.pincodeRequired="Enter 6 digit"):e.storeerr={"border-bottom":"#ddd 1px solid"}}else r=0,e.storeerr={"border-bottom":"red 1px solid"},e.pincodeRequired="Pincode is required";1==r&&i.updateRecord(a.profile,e.myData.name,e.myData.address,e.myData.email,e.myData.hdnemail,e.myData.phone,e.hdnPhone,e.myData.pincode,e.myData.businessName,e.myData.panard,e.myData.tin).success(function(r){r.msg&&(e.errormail=r.msg),1==r.Str&&o.go("app.my_address")}).error(function(e){})}}]),app.controller("SelectStoreCtrl",["$scope","SelectStore",function(e,o){checkConnection()&&$state.go("app.error_page"),$localStorage.profile||$state.go("app.login"),e.formData={},e.selectStore=[],o.Select_Store().success(function(o){e.selectStore=e.selectStore.concat(o.data1.records1),e.postsCompleted=!0}).error(function(o){e.category=[]}),e.data={clientSide:"ng"}}]),app.controller("StoreListCtrl",["$scope","$state","SelectCode","SelectStore","$localStorage","$sessionStorage","$ionicPopup","$timeout","$rootScope","$stateParams",function(e,o,r,t,a,i,s,n,l,d){if(e.formData={},e.cover=0,checkConnection()){var c=s.alert({title:"Network issue",template:"Oops something wrong!",okText:"Refresh"});c.then(function(e){o.go(o.current,{},{reload:!0})})}a.profile||o.go("app.login"),e.cover=0,e.IsVisible=!1,e.ShowHide=function(){e.IsVisible=!e.IsVisible,e.errormail=!e.errormail},e.selectStore=[],e.loadingdata=1,t.Select_Store(a.profile,a.version,a.update_time).success(function(o){if(e.loadingdata=0,e.selectStore=e.selectStore.concat(o.data1.records1),e.$broadcast("scroll.infiniteScrollComplete"),e.postsCompleted=!0,a.update_time=o.update_time,""!=o.update_url){var r=s.confirm({title:"App update",template:"New update is available. Do you want to update it ?"});r.then(function(e){e&&window.open(o.update_url,"_system")})}}).error(function(o){e.selectStore=[]}),e.data={clientSide:"ng"},e.serverSideChange=function(t){l.itemInCart=0,e.cover=1,r.StoreChange(a.profile,t).success(function(r){if(r.data1)a.currentSelectedShop=r.data1,a.currentSelectedShopName=r.store_name,a.cart="current_"+r.data1,a.currencyCode=r.currencyID,a.ordering=r.ordering,e.mrp=a.mrp=r.mrp,e.category_image=a.category_image=r.category_image,e.cover=0,l.itemInCart=0,o.go("app.category");else{e.cover=0;s.alert({title:"Inactive Shop Code!",template:"Kindly wait for Store owner approval"});o.go(o.current,{},{reload:!0})}}).error(function(e,r){if(e||0!=r){if(408===r){s.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});o.go(o.current,{},{reload:!0})}}else o.go(o.current,{},{reload:!0})})},e.getAuthenticate=function(){e.errormsg="",e.formData.store_list?(e.cover=1,r.Select_Code(e.formData.store_list,a.profile).success(function(r){if(e.errormsg="",0==r.data1)e.cover=0,e.errormsg="Invalid Store Code";else if(e.cover=0,2==r.msg){e.formData.store_list="";s.alert({title:"New store!",template:"New store has been successfully added."});e.IsVisible=!1,o.transitionTo(o.current,d,{reload:!0,inherit:!1,notify:!0})}else e.errormsg=r.msg;e.$broadcast("scroll.infiniteScrollComplete"),e.postsCompleted=!0}).error(function(e){})):e.errormsg="Field can not be blank."}}]),app.controller("AppController",function(e,o){e.toggleLeft=function(){o.toggleLeft()}}),app.controller("CartController",function(e){e.data={items:[]};for(var o=0;o<25;o++)e.data.items.push({id:o,label:"Item "+o})}),app.directive("ionCart",function(){return{restrict:"E",templateUrl:"ionCart.html"}}),app.directive("ionPurchase",function(){return{restrict:"E",template:"<h2>This is Ion Purchase</h2>"}}),app.controller("MyCheckCtrl",["$scope",function(e){e.postsCompleted=!0}]),app.controller("MyCtl",function(e){e.IsVisible=!1,e.isDisabled=!1,e.ShowHide=function(){e.IsVisible=!e.IsVisible,e.hide()}}),app.controller("WishListCtrl",["$state","$scope","$localStorage","$sessionStorage","myWishList","$rootScope",function(e,o,r,t,a,i){checkConnection()&&e.go("app.error_page"),o.wishList=r.wishList;var s="totalItemInCart_"+r.cart;r[s]?i.itemInCart=r[s]:(r[s]=0,i.itemInCart=r[s]),o.product=[],o.backurl=r.preURL,o.latestproduct=r.latestProduct,a.myWishListData(r.profile,r.currentSelectedShop).success(function(e){o.hasItem=e.hasItem,o.product=o.product.concat(e.data1.records1),o.subcategory=e.data2,o.counter=e.data4.records1,o.mycounter=o.counter[0],o.currencyCode=e.currencyCode,o.$broadcast("scroll.infiniteScrollComplete"),o.postsCompleted=!0}).error(function(e){}),o.getProductId=function(e){r.productID=e,r.productParentID=e}}]),app.controller("GalleryCtrl",["$scope","Photos","$ionicModal",function(e,o,r){e.items=[],e.times=0,e.postsCompleted=!1,e.getPosts=function(){o.getPosts().success(function(o){e.items=e.items.concat(o),e.$broadcast("scroll.infiniteScrollComplete"),e.times=e.times+1,e.times>=4&&(e.postsCompleted=!0)}).error(function(o){e.items=[]})},e.doRefresh=function(){e.times=0,e.items=[],e.postsCompleted=!1,e.getPosts(),e.$broadcast("scroll.refreshComplete")},r.fromTemplateUrl("templates/image-modal.html",{scope:e,animation:"slide-in-up"}).then(function(o){e.modal=o}),e.openModal=function(){e.showNav=!0,e.modal.show()},e.closeModal=function(){e.modal.hide()},e.showImage=function(o){e.imageIndex=o,e.imageSrc=e.items[o].image_full,e.openModal()},e.imageNavigate=function(o){"right"==o?e.imageIndex=e.imageIndex+1:e.imageIndex=e.imageIndex-1,void 0===e.items[e.imageIndex]?e.closeModal():e.imageSrc=e.items[e.imageIndex].image_full},e.$on("$stateChangeStart",function(){e.modal.remove()})}]),app.controller("LogoutCtrl",["$state","$scope","$localStorage","$sessionStorage",function(e,o,r,t){var a=r.version,i=r.update_time;r.$reset(),t.$reset(),r.version=a,r.update_time=i,localStorage.auth_token="",e.go("app.login")}]);
app.controller("SliderController",function(e){e.images=[{src:"http://dezireit.com/ecommerceapp/hmvc/admin/assets/categorywiseImages/Ruchi23/14616662873023_.jpeg",title:"Pic 1"},{src:"http://dezireit.com/ecommerceapp/hmvc/admin/assets/categorywiseImages/Ruchi23/proImage239/146173839710product_img.jpeg",title:"Pic 2"},{src:"http://dezireit.com/ecommerceapp/hmvc/admin/assets/categorywiseImages/Ruchi23/14616662873023_.jpeg",title:"Pic 3"}]});
app.controller("myOrderCtrl",["$scope","$state","$localStorage","$sessionStorage","$rootScope","$location","myOrder","$ionicPopup","$timeout","$ionicHistory",function($scope,$state,$localStorage,$sessionStorage,$rootScope,$location,myOrder,$ionicPopup,$timeout,$ionicHistory){checkConnection()&&$state.go("app.error_page"),$localStorage.profile||$state.go("app.login"),$scope.noMoreOrdersAvailable=!0;var myId=$localStorage.profile,currentShop=$localStorage.currentSelectedShop,shopWise="cart_"+$localStorage.cart,shopWiseItem="totalItemInCart_"+$localStorage.cart;$scope.items=[],$scope.orderWise_items=[],$scope.latestproduct=$localStorage.latestProduct,$scope.wishList=$localStorage.wishList,$localStorage[shopWiseItem]?$rootScope.itemInCart=$localStorage[shopWiseItem]:($localStorage[shopWiseItem]=0,$rootScope.itemInCart=$localStorage[shopWiseItem]),$rootScope.ordering=$localStorage.ordering,$scope.orderProLimit=0,$scope.items=[],$scope.getmyOrder=function(){$scope.noMoreproOrdersAvailable=!0,$scope.loadingdata=1,myOrder.myOrderData(myId,currentShop).success(function(e){$scope.loadingdata=2,$scope.items=e.data1.records,$scope.orderProLimit=$scope.items.length,e.remainingData>0?$scope.noMoreproOrdersAvailable=!1:$scope.noMoreproOrdersAvailable=!0}).error(function(){})},$scope.loadMoreProOrder=function(){$scope.loadingdata=1;var e=$scope.orderProLimit;myOrder.myProOrderData(myId,currentShop,e).success(function(e){$scope.loadingdata=2,$scope.items=$scope.items.concat(e.data1.records),$scope.orderProLimit=$scope.items.length,$scope.$broadcast("scroll.infiniteScrollComplete"),e.remainingData>0?$scope.noMoreproOrdersAvailable=!1:$scope.noMoreproOrdersAvailable=!0}).error(function(){})},$scope.reload=function(){window.location.reload()},$scope.noMoreOrdersAvailable=!0,$scope.orderLimit=0,$scope.orderWise_items=[],$scope.getOrderWiseLst=function(){$scope.loadingdata=1,myOrder.myOrderWiseLst(myId,currentShop).success(function(e){$scope.loadingdata=2,$scope.orderWise_items=e.data1.records,$scope.orderLimit=$scope.orderWise_items.length,$scope.currency=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,e.remainingData>0?$scope.noMoreOrdersAvailable=!1:$scope.noMoreOrdersAvailable=!0}).error(function(){$scope.orderWise_items=[]})},$scope.loadMoreOrder=function(){var e=$scope.orderLimit;myOrder.loadMyOrderWiseLst(myId,currentShop,e).success(function(e){$scope.loadingdata=2,$scope.orderWise_items=$scope.orderWise_items.concat(e.data1.records),$scope.orderLimit=$scope.orderWise_items.length,$scope.currency=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,e.remainingData>0?$scope.noMoreOrdersAvailable=!1:$scope.noMoreOrdersAvailable=!0}).error(function(){$scope.orderWise_items=[]})},$scope.getProductId=function(e,o){$localStorage.productID=e,o?$localStorage.productParentID=o:$localStorage.productParentID=e},$scope.cover=0,$scope.reorder=function(index){$scope.latestPrice=0,myOrder.productPrice(myId,currentShop,$scope.items[index].id).success(function(posts){if($scope.latestPrice=parseInt(posts.data),$rootScope.myCart={prduct_id:$scope.items[index].id,product_name:$scope.items[index].name.replace(", "," "),quantity:$scope.items[index].quantity,pkgquantity:$scope.items[index].pkgquantity,price:$scope.latestPrice,image:$scope.items[index].image,color:$scope.items[index].child,total:0},$scope.cover=1,$localStorage[shopWise]){var flag=0,tempcart="",addQuantity=0,myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;if(angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==$scope.items[index].id&&0==flag&&(productWise.quantity=parseInt(productWise.quantity)+parseInt($scope.items[index].quantity),flag=1,addQuantity=parseInt($scope.items[index].quantity));tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag)$localStorage[shopWise]=tempcart,flag=0,tempcart="";else{var totalCartItem=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart);$localStorage[shopWise]=totalCartItem}$rootScope.itemInCart=parseInt($rootScope.itemInCart)+addQuantity,$localStorage[shopWiseItem]=$rootScope.itemInCart}else{var totalCartItem=JSON.stringify($rootScope.myCart);$localStorage[shopWise]=totalCartItem,$rootScope.itemInCart=parseInt($scope.items[index].quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart}$state.go("app.order")}).error(function(){$scope.orderWise_items=[]})},$scope.cover=0,$scope.orderReorder=function(e,o){$localStorage.orderId=e,$localStorage.getVal=o,$state.go("app.reorderPage")},$scope.orderWiseReorder=function(orderId){var flag=0;$scope.cover=1;var tempcart="";myOrder.orderWiseProduct(myId,currentShop,orderId).success(function(posts){$scope.orderWiseItem=posts.data1.records,$scope.cover=0,angular.forEach($scope.orderWiseItem,function(values,key){if($rootScope.myCart={prduct_id:values.id,product_name:values.name.replace(", "," "),quantity:values.quantity,pkgquantity:values.pkgquantity,price:values.price,image:values.image,color:7,total:0},$localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;if(angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==values.id&&0==flag&&(productWise.quantity=parseInt(productWise.quantity)+parseInt(values.quantity),flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag)$localStorage[shopWise]=tempcart,flag=0,tempcart="";else{var totalCartItem=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart);$localStorage[shopWise]=totalCartItem}$rootScope.itemInCart=parseInt($rootScope.itemInCart)+parseInt(values.quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart}else{var totalCartItem=JSON.stringify($rootScope.myCart);$localStorage[shopWise]=totalCartItem,$rootScope.itemInCart=parseInt(values.quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart}$state.go("app.order")})}).error(function(){$scope.orderWise_items=[]})}}]),app.controller("thankyouCtrl",["$state","$scope","$rootScope","$localStorage","$ionicPopup",function(e,o,t,r,a){checkConnection()&&e.go("app.error_page");var s=("cart_"+r.cart,"totalItemInCart_"+r.cart);r[s]?t.itemInCart=r[s]:(r[s]=0,t.itemInCart=r[s]),o.latestproduct=r.latestProduct,o.wishList=r.wishList,t.ordering=r.ordering,o.wishDirection=function(){if(r.wishList)e.go("app.wish_list");else{a.alert({title:"Your Wish List",template:"Your WishList is empty!"})}},o.orderRedirection=function(){var o="cart_"+r.cart;if(r[o],r[o])e.go("app.order");else{a.alert({title:"Your cart",template:"Your cart is empty!"})}}}]);
app.controller("reorderCtrl",["$scope","$rootScope","$ionicPopup","$state","$localStorage","$ionicPopup","myOrder","changeorderStatus","$stateParams","$ionicHistory",function($scope,$rootScope,$ionicPopup,$state,$localStorage,$ionicPopup,myOrder,changeorderStatus,$stateParams,$ionicHistory){var shopWise="cart_"+$localStorage.cart,shopWiseItem="totalItemInCart_"+$localStorage.cart;$scope.counters=[],$rootScope.ordering=$localStorage.ordering,$scope.counters=$rootScope.counters,$scope.getReorder=function(){$scope.loadingdata=1,$scope.items=[],$scope.totalqauntity=0,$scope.itemQuantity1=[],$scope.itemQuantity=[],$scope.formData={},$scope.orderId=$localStorage.orderId,$scope.getVal=$localStorage.getVal,myOrder.orderWiseProduct($localStorage.profile,$localStorage.currentSelectedShop,$localStorage.orderId).success(function(t){$scope.loadingdata=2,$scope.re_items=t.data1.records,$scope.total=t.total,$scope.totalquantity=t.totalQuantity,$scope.deliveryStatus=t.deliveryStatus,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.orderStatusName=t.orderStatusName;for(var e=$scope.re_items.length,o=0;o<e;o++)$scope.counters.indexOf($scope.re_items[o].quantity)==-1&&$scope.counters.splice(0,0,$scope.re_items[o].quantity)}).error(function(t,e){if(t||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.re_items=[]})},$scope.changestatus=function(t,e){changeorderStatus.changeOrderStatus(t,e).success(function(t){$state.transitionTo($state.current,$stateParams,{reload:!0,inherit:!1,notify:!0})}).error(function(t){})},$scope.deleterecord=function(t){$scope.total=$scope.total-$scope.re_items[t].pro_cost*$scope.re_items[t].pkgquantity*$scope.re_items[t].quantity,$scope.totalquantity=$scope.totalquantity-$scope.re_items[t].quantity,$scope.re_items.splice(t,1)},$scope.addreordercart=function(){var showNotify=0;if(angular.forEach($scope.re_items,function(value,key){var notify_product_name=value.name;if(2!=value.notify){var price=value.selling_price,productId=value.id,image=value.image,pkgquantity=value.pkgquantity,product_name=value.name,variation=value.child;if($scope.formData.itemQuantity[productId]?quantity=parseInt($scope.formData.itemQuantity[productId]):quantity=parseInt(value.quantity),quantity){var flag=0,tempcart="";if($rootScope.itemInCart=parseInt($rootScope.itemInCart)+parseInt(quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart,$localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==productId&&0==flag&&(productWise.quantity=productWise.quantity+quantity,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag?($localStorage[shopWise]=tempcart,flag=0,tempcart=""):($rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart))}else $rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)}}else showNotify=1}),1==showNotify){var alertPopup=$ionicPopup.alert({title:"Product quantity ",template:"Oops some product is  not available in our stock",okText:"Go"});alertPopup.then(function(t){$state.go("app.order")})}else $state.go("app.order")},$scope.setpreURL=function(){$ionicHistory.goBack()}}]);
function checkConnection(){try{var e=navigator.connection&&navigator.connection.type;return!e||"none"==e}catch(t){console.log(t)}}function animateImage(e){var t=angular.element(document.getElementsByClassName("my-icon my-icon ion-ios-cart")),o=(t.prop("offsetTop"),t.prop("offsetParent")),a=t.prop("offsetLeft"),r=t.prop("offsetWidth"),c=(t.prop("offsetHeight"),angular.element(document.getElementById("my_cart_"+e))),i=angular.element(event.target.parentNode.parentNode.parentNode.parentNode.parentNode),s=c.prop("offsetLeft"),p=c.prop("offsetTop"),n=document.getElementById("my_cart_"+e).src,l=angular.element('<img src="'+n+'"/>');p_top=o.offsetTop+p,l.css({height:"150px",position:"absolute",top:p+"px",left:s+"px",opacity:.5}),l.addClass("itemaddedanimate"),i.append(l),setTimeout(function(){l.css({height:"75px",top:p_top+"px",bottom:0,left:a+r/2+"px",opacity:.5})},500),setTimeout(function(){l.remove()},1500)}function animateslider(e){var t=angular.element(document.getElementsByClassName("my-icon my-icon ion-ios-cart")),o=(t.prop("offsetTop"),t.prop("offsetParent")),a=t.prop("offsetLeft"),r=t.prop("offsetWidth"),c=(t.prop("offsetHeight"),angular.element(document.getElementsByClassName("slider_img"))),i=angular.element(event.target.parentNode.parentNode.parentNode.parentNode.parentNode),s=c.prop("offsetLeft"),p=c.prop("offsetTop"),n=document.getElementsByClassName("slider_img")[0].src,l=angular.element('<img src="'+n+'"/>');p_top=o.offsetTop+p,l.css({height:"150px",position:"absolute",top:p+"px",left:s+"px",opacity:.5}),l.addClass("itemaddedanimate"),i.append(l),setTimeout(function(){l.css({height:"75px",top:p_top+"px",bottom:0,left:a+r/2+"px",opacity:.5})},500),setTimeout(function(){l.remove()},1500)}app.controller("CategoryCtrl",["$scope","$state","get_cat","$localStorage","$sessionStorage","$rootScope","$location","$ionicPopup","$ionicPlatform",function(e,t,o,a,r,c,i,s,p){p.offHardwareBackButton(function(){}),e.remainingData=!0,e.load_data=!1,e.limit=0,e.noMoreItemsAvailable=!0,c.ordering=a.ordering,checkConnection()&&t.go("app.error_page"),a.profile||t.go("app.login"),e.shopName=a.currentSelectedShopName,e.orderRedirection=function(){var e="cart_"+a.cart;if(a[e],a[e])t.go("app.order");else{s.alert({title:"Your cart",template:"Your cart is empty!"})}},c.location=i,a.preURL=c.location.path(),e.category=[];var n=0,l="totalItemInCart_"+a.cart;a[l]?c.itemInCart=a[l]:(a[l]=0,c.itemInCart=a[l]),e.loadingdata=1,e.hasData=!0,o.getcategory(n,a.currentSelectedShop,1,a.profile).success(function(t){e.loadingdata=0,e.category=e.category.concat(t.data1.records1),e.hasData=t.hasData,a.wishList=t.wishList,e.wishList=a.wishList,a.latestProduct=t.latestProduct,e.latestproduct=a.latestProduct,e.category_image=a.category_image,e.$broadcast("scroll.infiniteScrollComplete"),e.postsCompleted=!0,t.remainingData>0&&(e.noMoreItemsAvailable=!1),e.limit=e.category.length}).error(function(o,a){if(o||0!=a){if(408===a){s.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});t.go(t.current,{},{reload:!0})}}else t.go("app.error_page");e.category=[]}),e.loadMore=function(){var r=e.limit;e.load_data=!0,o.loadMore(n,a.currentSelectedShop,1,a.profile,r).success(function(t){e.category=e.category.concat(t.data1.records1),e.$broadcast("scroll.infiniteScrollComplete"),e.postsCompleted=!0,e.limit=e.category.length,t.remainingData>0?e.noMoreItemsAvailable=!1:e.noMoreItemsAvailable=!0,e.load_data=!1}).error(function(o,a){if(o||0!=a){if(408===a){s.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});t.go(t.current,{},{reload:!0})}}else t.go("app.error_page");e.load_data=!1})},e.wishDirection=function(){if(a.wishList)t.go("app.wish_list");else{s.alert({title:"Your Wish List",template:"Your WishList is empty!"})}}}]),app.controller("SubategoryCtrl",["$scope","get_cat","$sessionStorage","$localStorage","$rootScope","$state","$location","myFavourite","$ionicPopup","searchItem","totalItme","notifyMe","$stateParams","$ionicHistory",function($scope,get_cat,$sessionStorage,$localStorage,$rootScope,$state,$location,myFavourite,$ionicPopup,searchItem,totalItme,notifyMe,$stateParams,$ionicHistory){$scope.noMoreItemsAvailable=!0,$rootScope.ordering=$localStorage.ordering,$scope.load_data=!1,$scope.limit=0,$scope.wishLimit=0,$scope.searchproduct=[],checkConnection()&&$state.go("app.error_page"),$localStorage.profile||$state.go("app.login"),$scope.latestproduct=$localStorage.latestProduct,$scope.shopName=$localStorage.currentSelectedShopName,$scope.category_image=$localStorage.category_image,$scope.mrp=$localStorage.mrp,$rootScope.location=$location,$localStorage.preURL=$rootScope.location.path(),$scope.loadingdata=1,$scope.orderRedirection=function(){var e="cart_"+$localStorage.cart;if($localStorage[e],$localStorage[e])$state.go("app.order");else{$ionicPopup.alert({title:"Your Cart",template:"Your cart is empty!"})}};var cat_id=$stateParams.subcategoryId,shopWise="cart_"+$localStorage.cart,shopWiseItem="totalItemInCart_"+$localStorage.cart;$scope.wishList=$localStorage.wishList,$scope.wishDirection=function(){if($localStorage.wishList)$state.go("app.wish_list");else{$ionicPopup.alert({title:"Your Wish List",template:"Your WishList is empty!"})}},$localStorage[shopWiseItem]?$rootScope.itemInCart=$localStorage[shopWiseItem]:($localStorage[shopWiseItem]=0,$rootScope.itemInCart=$localStorage[shopWiseItem]);var totalitem=1;$scope.formData={},$scope.category=[],$scope.product-[],$scope.addTofavourite=function(e,t){e&&myFavourite.myFavouriteData(e,$localStorage.profile,t).success(function(e){$scope.category=$scope.category.concat(e.data1.records1)}).error(function(e){$scope.category=[]})},$scope.addTocart=function(productId,price,image,product_name,pkgquantity,variation){animateImage(productId),totalitem=$scope.formData.mycounter&&$scope.formData.mycounter[productId]?parseInt($scope.formData.mycounter[productId]):1,$localStorage[shopWiseItem]=parseInt($localStorage[shopWiseItem])+parseInt(totalitem),$rootScope.itemInCart=parseInt($localStorage[shopWiseItem]);var flag=0,tempcart="";if($localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==productId&&0==flag&&(productWise.quantity=productWise.quantity+totalitem,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag?($localStorage[shopWise]=tempcart,tempcart="",flag=0):($rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:totalitem,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart))}else $rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:totalitem,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)},$scope.hasData=!0,$scope.getsubcategory=function(){get_cat.getcategory(cat_id,$localStorage.currentSelectedShop,2,$localStorage.profile).success(function(e){$scope.loadingdata=0,$scope.product="",$scope.subcategorydata=e.data1.records1,$scope.subproductdata=e.data3.records1,$scope.hasData=e.hasData,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.subcategory=e.data2,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,e.remainingData>0||e.moreItem>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.subcategorydata.length>$scope.subproductdata.length?$scope.limit=$scope.subcategorydata.length:$scope.limit=$scope.subproductdata.length,$scope.limit=$scope.subcategorydata.length,$scope.subproductdata.length?$scope.ProductLimit=$scope.subproductdata.length:$scope.ProductLimit=0}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.category=[]})},$scope.loadMore=function(){var e=$scope.limit,t=$scope.ProductLimit;$scope.load_data=!0;var o=e+"_/"+t,a=0;get_cat.loadMore(cat_id,$localStorage.currentSelectedShop,2,$localStorage.profile,o).success(function(e){$scope.subcategorydata=$scope.subcategorydata.concat(e.data1.records1),$scope.subproductdata=$scope.subproductdata.concat(e.data3.records1),$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,$scope.loadTime++,a=0==a&&0!=e.moreItem?e.moreItem:e.remainingData,a>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.subcategorydata.length>$scope.subproductdata.length?$scope.limit=$scope.subcategorydata.length:$scope.limit=$scope.subproductdata.length,$scope.limit=$scope.subcategorydata.length,$scope.ProductLimit=$scope.subproductdata.length,$scope.load_data=!1}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.load_data=!1})},$scope.addToDyfavourite=function(e,t){myFavourite.myDyfavourite(e,$localStorage.profile,t).success(function(t){t&&("ion-heart"==document.getElementById(e).className?(document.getElementById(e).className="",document.getElementById(e).className="ion-android-favorite-outline"):(document.getElementById(e).className="",document.getElementById(e).className="ion-heart"),$scope.wishList=t.wishList,$localStorage.wishList=$scope.wishList)}).error(function(e){})},$scope.notify=function(e){$ionicPopup.alert({title:"Notify Me",template:"We will inform you, Once Product is Available."});$localStorage.productID=e,notifyMe.notifyMe($localStorage.productID,$localStorage.profile,$localStorage.currentSelectedShop).success(function(e){}).error(function(e){})},$scope.setpreURL=function(){$ionicHistory.goBack()}}]),app.controller("shopingCart",["$scope","productService","getproduct","$rootScope","$ionicPopup","$timeout","$state","productlist","$localStorage","$sessionStorage","product_Info","$location","myFavourite","$ionicPopup","notifyMe","changeorderStatus","newProduct","$stateParams","$ionicModal","$stateParams","$ionicHistory",function($scope,productService,getproduct,$rootScope,$ionicPopup,$timeout,$state,productlist,$localStorage,$sessionStorage,product_Info,$location,myFavourite,$ionicPopup,notifyMe,changeorderStatus,newProduct,$stateParams,$ionicModal,$stateParams,$ionicHistory){$scope.load_data=!1,$scope.imgindex=0,$scope.hasData=!0,$scope.noMoreItemsAvailable=!0,checkConnection()&&$state.go("app.error_page"),$localStorage.profile||$state.go("app.login"),$scope.shopName=$localStorage.currentSelectedShopName,$rootScope.ordering=$localStorage.ordering,$scope.latestproduct=$localStorage.latestProduct;var shopWise="cart_"+$localStorage.cart,shopWiseItem="totalItemInCart_"+$localStorage.cart;$scope.wishList=$localStorage.wishList,$scope.formData={},$scope.notify2=function(e){$ionicPopup.alert({title:"Notify Me",template:"We will inform you, Once Product is Available."});$localStorage.productID=e,notifyMe.notifyMe($localStorage.productID,$localStorage.profile,$localStorage.currentSelectedShop).success(function(e){}).error(function(e){})},$scope.notify=function(e){$ionicPopup.alert({title:"Notify Me",template:"We will inform you, Once Product is Available."});$localStorage.productID=e,notifyMe.notifyMe($localStorage.productID,$localStorage.profile,$localStorage.currentSelectedShop).success(function(e){}).error(function(e){})},$scope.wishDirection=function(){if($localStorage.wishList)$state.go("app.wish_list");else{$ionicPopup.alert({title:"Your Wish List",template:"Your WishList is empty!"})}},$scope.product=[],$localStorage[shopWiseItem]?$rootScope.itemInCart=$localStorage[shopWiseItem]:($localStorage[shopWiseItem]=0,$rootScope.itemInCart=$localStorage[shopWiseItem]),$scope.orderRedirection=function(){var e="cart_"+$localStorage.cart;if($localStorage[e],$localStorage[e])$state.go("app.order");else{$ionicPopup.alert({title:"Your cart",template:"Your cart is empty!"})}},$scope.limit=0;var category_id=$stateParams.subcategoryId;$scope.getProduct=function(){$scope.counter="",$scope.loadingdata=1,$scope.hasData=!1,productlist.getproductList(category_id,$localStorage.currentSelectedShop,$localStorage.profile).success(function(e){$scope.loadingdata=0,$scope.product=$scope.product.concat(e.data1.records1),$scope.subcategory=e.data2,$scope.hasData=e.hasData,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.notify=e.notify,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,$scope.limit=$scope.product.length,e.remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.category=[]})},$scope.getLatestProduct=function(){$scope.hasData=!0,$scope.loadingdata=1,newProduct.getnewProduct($localStorage.currentSelectedShop,$localStorage.profile).success(function(e){$scope.loadingdata=0,$scope.product=e.data1.records1,$scope.hasData=e.hasData,$scope.subcategory=e.data2,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.notify=e.notify,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,$scope.limit=$scope.product.length,e.remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.category=[]})},$scope.latestloadMore=function(){$scope.load_data=!0;var e=$scope.limit;productlist.loadMore(category_id,$localStorage.currentSelectedShop,$localStorage.profile,e).success(function(e){$scope.product=e.data1.records1,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,$scope.limit=$scope.product.length,e.remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.load_data=!1}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.load_data=!1})},$scope.loadMore=function(){$scope.load_data=!0;var e=$scope.limit;productlist.loadMore(category_id,$localStorage.currentSelectedShop,$localStorage.profile,e).success(function(e){$scope.product=$scope.product.concat(e.data1.records1),$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,$scope.limit=$scope.product.length,e.remainingData>0?$scope.noMoreItemsAvailable=!1:$scope.noMoreItemsAvailable=!0,$scope.load_data=!1}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.load_data=!1})},$scope.colordata=[],$scope.addcustomcart=function(itemImage,color){angular.forEach($scope.colordata,function(value,key){var price=value.discount_price,productId=value.id,color=[{color:value.color,size:value.size}],size=value.size,product_name=$scope.name,pkgquantity=1;if($scope.formData.myProductCounter?quantity=parseInt($scope.formData.myProductCounter[productId]):quantity=0,quantity){animateslider($rootScope.imgindex);var flag=0,image=itemImage[key].image,tempcart="";if($rootScope.itemInCart=parseInt($rootScope.itemInCart)+parseInt(quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart,$localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==productId&&0==flag&&(productWise.quantity=productWise.quantity+quantity,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag?($localStorage[shopWise]=tempcart,flag=0,tempcart=""):($rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:color,total:0},$localStorage[shopWise]=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart))}else $rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:color,total:0},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)}})},$scope.addTocart=function(productId,price,image,product_name,pkgquantity,variation){animateImage(productId);var flag=0,quantity=1,tempcart="";if(quantity=$scope.formData.mycounter&&$scope.formData.mycounter[productId]?parseInt($scope.formData.mycounter[productId]):1,$rootScope.itemInCart=parseInt($rootScope.itemInCart)+parseInt(quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart,$localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==productId&&0==flag&&(productWise.quantity=productWise.quantity+quantity,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag?($localStorage[shopWise]=tempcart,flag=0,tempcart=""):($rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart))}else $rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)},$scope.setpreURL=function(){$ionicHistory.goBack()},$scope.setPreCatId=function(){$localStorage.subcategoryId=$localStorage.preSubcategoryId},$scope.notify1=function(e){$ionicPopup.alert({title:"Notify Me",template:"Once Product Available we notify you by Email"});$localStorage.productID=e,notifyMe.notifyMe($localStorage.productID,$localStorage.profile,$localStorage.currentSelectedShop).success(function(e){}).error(function(e){})},$scope.getProductDetail=function(){$scope.loadingdata2=1,$scope.productdetail=[],$scope.images=[],$scope.zero="a",$scope.pck_quantity=0,$scope.backurl=$localStorage.preURL,product_Info.productInfo($stateParams.productID,$localStorage.currentSelectedShop,$localStorage.profile).success(function(e){$scope.loadingdata2=0,$scope.counter="",$scope.images=e.data2.records2,$scope.box_size=e.box_size,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.colordata=e.data5.records1;for(var t=$scope.colordata.length,o=0;o<t;o++)if($scope.colordata[o].normal&&""!=$scope.colordata[o].normal){var a={normal:$scope.colordata[o].normal};$scope.images.push(a)}$scope.formData.colordata=$scope.colordata[0],$scope.showcolor=e.showcolor,$scope.showsize=e.showsize,$scope.divSize=e.divSize,$scope.sku=e.sku,$scope.brand=e.brand,$scope.notify=e.notify,$scope.currentProductId=parseInt(e.id),$scope.status=e.status,$scope.notify=e.notify,$scope.classname=e.classname,$scope.pck_quantity=e.quantity,$scope.color_variation=e.quantity,$scope.name=e.name,$scope.percentage_discount=e.percentage_discount,$scope.discounted_value=e.discounted_value,$scope.price=parseInt(e.price),$scope.description=e.description,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0}).error(function(e,t){if(e||0!=t){if(408===t){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.category=[]})},$scope.zoomImages=function(e){$scope.activeSlide=e,$scope.showModal("templates/image-popover.html")},$scope.showModal=function(e){$ionicModal.fromTemplateUrl(e,{scope:$scope,animation:"slide-in-up"}).then(function(e){$scope.modal=e,$scope.images=$scope.images,$scope.modal.show()})},$scope.closeModal=function(){$scope.modal.hide(),$scope.modal.remove()},$scope.addTofavourite=function(e,t){t&&myFavourite.myFavouriteData(t,$localStorage.profile,e,$localStorage.currentSelectedShop).success(function(e){$scope.status=e.status,1==$scope.status,2==$scope.status,$localStorage.wishList=e.wishList,$scope.wishList=$localStorage.wishList,$scope.classname=e.classname}).error(function(e){$scope.category=[]})},$scope.product=[],$scope.totalItem=1,$scope.addcart=function(id,getPrice,image,product_name,pck_quantity,color){animateslider($scope.imgindex);var price=getPrice;$scope.currentProductId=id;var flag=0,quantity=1,tempcart="",pkgquantity=pck_quantity;if(quantity=$scope.formData.myProductCounter?parseInt($scope.formData.myProductCounter):1,$rootScope.itemInCart=parseInt($rootScope.itemInCart)+parseInt(quantity),$localStorage[shopWiseItem]=$rootScope.itemInCart,$localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;if(angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==$scope.currentProductId&&0==flag&&(productWise.quantity=productWise.quantity+quantity,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag)$localStorage[shopWise]=tempcart,flag=0,tempcart="";else{$rootScope.myCart={prduct_id:$scope.currentProductId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:color};var totalCartItem=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart);$localStorage[shopWise]=totalCartItem}}else $rootScope.myCart={prduct_id:$scope.currentProductId,product_name:product_name.replace(", "," "),quantity:quantity,price:price,pkgquantity:pkgquantity,image:image,color:color},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)},$scope.showConfirm=function(){$state.go("app.order")}}]),app.directive("addToProductCartButton",function(){function e(e,t,o){t.on("click",function(t){var o=angular.element(document.getElementsByClassName("my-icon my-icon ion-ios-cart"));o.prop("offsetTop"),o.prop("offsetLeft"),o.prop("offsetWidth"),o.prop("offsetHeight");if(e.$watch("currentIndex",function(){imgIndex=e.currentIndex}),"Add to cart"==t.target.innerHTML)var a=angular.element(t.target.parentNode.parentNode.parentNode.parentNode.childNodes[3].childNodes[1].children[imgIndex].childNodes[1]);else var a=angular.element(t.target.parentNode.parentNode.parentNode.childNodes[3].childNodes[1].children[imgIndex].childNodes[1]);var r=angular.element(t.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.offsetParent),c=a.prop("offsetLeft"),i=a.prop("offsetTop"),s=a.prop("currentSrc"),p=angular.element('<img src="'+s+'"/>');p.css({height:"150px",position:"absolute",top:i+"px",left:c+"px",opacity:.5}),p.addClass("itemaddedanimate"),r.append(p),setTimeout(function(){p.css({height:"0px",opacity:.5,top:"auto",bottom:0})},1e3),setTimeout(function(){p.remove()},1500)})}return{restrict:"E",link:e,transclude:!0,replace:!0,template:'<button class="add-to-cart" ng-transclude></button>'}}),app.directive("xRef",function(e,t){return{link:function(o,a,r){a.on("click",function(){t.path()===r.xref?e.reload():o.$apply(function(){t.path(r.xref)})})}}}),app.directive("slider",["$timeout","$stateParams",function(e,t){return{restrict:"AE",replace:!0,link:function(e,t,o,a){},templateUrl:"templates/templateurl.html",controller:["$scope","$sessionStorage","$localStorage","product_Info","$timeout",function(e,o,a,r,c){e.currentIndex=0,e.loadingdata=1,r.productImage(t.productID).success(function(t){e.loadingdata=0,e.images=t.data1.records,e.images.forEach(function(t){t.visible=!1,e.images[0].visible=!0})}).error(function(e){}),e.next=function(){e.currentIndex<e.images.length-1?e.currentIndex++:e.currentIndex=0},e.prev=function(){e.currentIndex>0?e.currentIndex--:e.currentIndex=e.images.length-1},e.$watch("currentIndex",function(){e.images.forEach(function(t){t.visible=!1,e.images[e.currentIndex].visible=!0,e.imgindex=e.currentIndex})});var i,s=function(){i=c(function(){e.next(),i=c(s,2e3)},2e3)};s(),e.$on("$destroy",function(){c.cancel(i)})}]}}]);
app.controller("wishCtrl",["$scope","$localStorage","$rootScope","$state","$location","myFavourite","$ionicPopup","myWishList","notifyMe","$stateParams","$ionicHistory",function($scope,$localStorage,$rootScope,$state,$location,myFavourite,$ionicPopup,myWishList,notifyMe,$stateParams,$ionicHistory){$scope.noMoreItemsAvailable=!0,$rootScope.ordering=$localStorage.ordering,$scope.load_data=!1,$scope.limit=0,$scope.wishLimit=0,$scope.searchproduct=[],checkConnection()&&$state.go("app.error_page"),$localStorage.profile||$state.go("app.login"),$scope.latestproduct=$localStorage.latestProduct,$scope.shopName=$localStorage.currentSelectedShopName,$scope.category_image=$localStorage.category_image,$scope.mrp=$localStorage.mrp,$rootScope.location=$location,$localStorage.preURL=$rootScope.location.path(),$scope.loadingdata=1;var shopWise="cart_"+$localStorage.cart,shopWiseItem="totalItemInCart_"+$localStorage.cart;$scope.wishList=$localStorage.wishList,$localStorage[shopWiseItem]?$rootScope.itemInCart=$localStorage[shopWiseItem]:($localStorage[shopWiseItem]=0,$rootScope.itemInCart=$localStorage[shopWiseItem]);var totalitem=1;$scope.formData={},$scope.category=[],$scope.product-[],$scope.addTocart=function(productId,price,image,product_name,pkgquantity,variation){animateImage(productId),totalitem=$scope.formData.mycounter&&$scope.formData.mycounter[productId]?parseInt($scope.formData.mycounter[productId]):1,$localStorage[shopWiseItem]=parseInt($localStorage[shopWiseItem])+parseInt(totalitem),$rootScope.itemInCart=parseInt($localStorage[shopWiseItem]);var flag=0,tempcart="";if($localStorage[shopWise]){var myCartItem=$localStorage[shopWise].split(", "),lenght=myCartItem.length;angular.forEach(myCartItem,function(value,key){var productWise=eval("("+value+")");for(i in productWise)productWise.prduct_id==productId&&0==flag&&(productWise.quantity=productWise.quantity+totalitem,flag=1);tempcart+=key<lenght-1?JSON.stringify(productWise)+", ":JSON.stringify(productWise)}),1==flag?($localStorage[shopWise]=tempcart,tempcart="",flag=0):($rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:totalitem,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=$localStorage[shopWise]+", "+JSON.stringify($rootScope.myCart))}else $rootScope.myCart={prduct_id:productId,product_name:product_name.replace(", "," "),quantity:totalitem,price:price,pkgquantity:pkgquantity,image:image,color:variation},$localStorage[shopWise]=JSON.stringify($rootScope.myCart)},$scope.addToDyfavourite=function(o,e){myFavourite.myDyfavourite(o,$localStorage.profile,e).success(function(e){e&&("ion-heart"==document.getElementById(o).className?(document.getElementById(o).className="",document.getElementById(o).className="ion-android-favorite-outline"):(document.getElementById(o).className="",document.getElementById(o).className="ion-heart"),$scope.wishList=e.wishList,$localStorage.wishList=$scope.wishList)}).error(function(o){})},$scope.noMoreWishAvailable=!0,$scope.getsearchProduct=function(){$scope.hasItem=!1,myWishList.myWishListData($localStorage.profile,$localStorage.currentSelectedShop).success(function(o){$scope.hasItem=o.hasItem,$scope.hasItem||($scope.hasMsg="Add products to your wish list while you shop and add them to your cart later."),$scope.product=o.data2,$scope.searchproduct=$scope.searchproduct.concat(o.data1.records1),$scope.wishLimit=$scope.searchproduct.length,$scope.loadingdata=0,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.$broadcast("scroll.infiniteScrollComplete"),$scope.postsCompleted=!0,o.remainingData>0?$scope.noMoreWishAvailable=!1:$scope.noMoreWishAvailable=!0}).error(function(o,e){if(o||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.noMoreWishAvailable=!1})},$scope.loadMoreWish=function(){var o=$scope.wishLimit;myWishList.loadWishListData($localStorage.profile,$localStorage.currentSelectedShop,o).success(function(o){$scope.hasItem=o.hasItem,$scope.product=o.data2,$scope.searchproduct=$scope.searchproduct.concat(o.data1.records1),$scope.wishLimit=$scope.searchproduct.length,$scope.loadingdata=0,$scope.currencyCode=$localStorage.currencyCode,$scope.mrp=$localStorage.mrp,$scope.postsCompleted=!0,o.remainingData>0?$scope.noMoreWishAvailable=!1:$scope.noMoreWishAvailable=!0}).error(function(o,e){if(o||0!=e){if(408===e){$ionicPopup.alert({title:"Timeout issue",template:"Oops something wrong!",okText:"Refresh"});$state.go($state.current,{},{reload:!0})}}else $state.go("app.error_page");$scope.noMoreWishAvailable=!1})},$scope.notify=function(o){$ionicPopup.alert({title:"Notify Me",template:"We will inform you, Once Product is Available."});$localStorage.productID=o,notifyMe.notifyMe($localStorage.productID,$localStorage.profile,$localStorage.currentSelectedShop).success(function(o){}).error(function(o){})},$scope.setpreURL=function(){$ionicHistory.goBack()}}]);